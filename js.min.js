var socialButtonCountObjects={},jllikeproShareUrls={mail:{},pinteres:{},linkedin:{}};jQuery.noConflict(),function(t,e,n,i){function o(t){if(t){var e=top.location.search.replace(/^\?/,"").split("&");for(var n in e){var i=e[n],o=i.match(/([^=]*)=(\w*)/);if(o[1]===t)return decodeURIComponent(o[2])}}return!1}var r=function(e){return e?t.extend(!0,r.defaults,e):r.defaults};r.defaults={selectors:{facebookButton:".l-fb",twitterButton:".l-tw",vkontakteButton:".l-vk",odnoklassnikiButton:".l-ok",gplusButton:".l-gp",mailButton:".l-ml",linButton:".l-ln",pinteresButton:".l-pinteres",LivejournalButton:".l-lj",BloggerButton:".l-bl",WeiboButton:".l-wb",TelegramButton:".l-tl",WhatsappButton:".l-wa",count:".l-count",ico:".l-ico",shareTitle:"h2:eq(0)",shareSumary:"p:eq(0)",shareImages:"img[src]"},buttonDepth:2,alternativeImage:"",alternativeSummary:"",alternativeTitle:"",forceAlternativeImage:!1,forceAlternativeSummary:!1,forceAlternativeTitle:!1,classes:{countVisibleClass:"like-not-empty"},keys:{shareLinkParam:"href"},popupWindowOptions:["left=0","top=0","width=500","height=400","personalbar=0","toolbar=0","scrollbars=1","resizable=1"]};var s=function(){};s.lastIndex=0,s.prototype={init:function(e,n,i){this.config=n,this.index=i,this.id=t(e).attr("id"),this.$context=e,this.$count=t(this.config.selectors.count,this.$context),this.$ico=t(this.config.selectors.ico,this.$context),this.collectShareInfo(),this.bindEvents(),this.ajaxRequest=this.countLikes()},bindEvents:function(){this.$context.bind("click",s.returnFalse),this.$ico.parent().bind("click",this,this.openShareWindow)},setCountValue:function(t){this.$context.addClass(this.config.classes.countVisibleClass),this.$count.text(t)},getCountLink:function(t){return this.countServiceUrl+encodeURIComponent(t)},collectShareInfo:function(){var o=this.$context,r=this;o=jQuery(jllickeproSettings.parentContayner).length>0?o.parents(jllickeproSettings.parentContayner).parent():o.parents(".jllikeproSharesContayner").parent();var s,l,c=t("input.link-to-share",o).val(),u=t("input.share-title",o).val(),h=t("input.share-image",o).val(),p=(jllickeproSettings.url,t(this.config.selectors.shareTitle,o));if(p.length||(p=t(this.config.selectors.shareTitle,s)),l=t("input.share-desc",o).val(),l.length||(l=t(this.config.selectors.shareSumary,o).text()),l.length||(l=o.text()),l.length||(l=o.parent().text()),this.domenhref=e.location.protocol+"//"+e.location.host,this.linkhref=jllickeproSettings.url+e.location.pathname+e.location.search,this.linkToShare=c?c:this.linkhref,this.title=""!=u?u:p.text(),this.config.forceAlternativeTitle?this.title=this.config.alternativeTitle:""==this.title&&this.config.alternativeTitle?this.title=this.config.alternativeTitle:""==this.title&&(this.title=n.title),l.length>0?this.summary=l:this.summary=this.config.alternativeSummary?this.config.alternativeSummary:"",this.summary=this.summary.length>200?a(this.summary,200)+"...":this.summary,this.images=[],"undefined"!=typeof h&&h.length)this.images[0]=h;else{var d=t(this.config.selectors.shareImages,o);if(s=o,!d.length)for(var f=0;0==d.length&&f<20;)f++,s=s.parent(),d=t(this.config.selectors.shareImages,s).not("#waitimg");d.length>0&!this.config.forceAlternativeImage?(d.each(function(t,e){r.images[t]=e.src}),this.images=r.images):this.images[0]=this.config.alternativeImage?this.config.alternativeImage:i}},getPopupOptions:function(){return this.config.popupWindowOptions.join(",")},plusOne:function(){var e=t("#"+this.id),n=t("span.l-count",e),i=n.text();i=""==i?0:parseInt(i),e.addClass("like-not-empty"),n.text(i+1)},disableMoreLikes:function(){if(jllickeproSettings.disableMoreLikes){var e=t("#"+this.id).parents(".jllikeproSharesContayner"),n=e.children(".share-id").val(),i=new Date((new Date).getTime()+2592e6);document.cookie="jllikepro_article_"+n+"=1; path=/; expires="+i.toUTCString();var o=t("<div/>").addClass("disable_more_likes");e.prepend(o)}},openShareWindow:function(t){var n=t.data,i=n.getShareLink(),o=n.getPopupOptions(),r=e.open(i,"",o);n.plusOne(),n.disableMoreLikes(),e.focus&&r.focus()},linkToShare:null,title:n.title,summary:null,images:[],countServiceUrl:null,$context:null,$count:null,$ico:null},s=t.extend(s,{returnFalse:function(t){return!1}});var a=function(e,n){var i="";return e.split(" ").every(function(e){var o=t.trim(e);return i.length+o.length<=n&&(""!=o&&(i+=" "+o),!0)}),i},l=function(t,e,n){this.init(t,e,n),this.type="facebook"};l.prototype=new s,l.prototype=t.extend(l.prototype,{countLikes:function(){var e=this.getCountLink(this.linkToShare),n=this.id;return t.ajax({url:e,dataType:"jsonp",success:function(e,i,o){if("success"==i&&"undefined"!=typeof e.share&&"undefined"!=typeof e.share.share_count&&e.share.share_count>0){var r=t("#"+n);r.addClass("like-not-empty"),t("span.l-count",r).text(e.share.share_count),w(r)}}})},getShareLink:function(){var t="https://www.facebook.com/sharer/sharer.php?app_id=114545895322903&sdk=joey&u="+encodeURIComponent(this.linkToShare)+"&display=popup&ref=plugin&src=share_button";return t},countServiceUrl:"https://graph.facebook.com/"});var c=function(t,e,n){this.init(t,e,n),this.type="twitter"};c.prototype=new s,c.prototype=t.extend(c.prototype,{countLikes:function(){},getShareLink:function(){var t=a(this.summary,140-this.title.length-this.linkToShare.length);return"https://twitter.com/intent/tweet?url="+encodeURIComponent(this.linkToShare)+"&text="+encodeURIComponent(this.title+". "+t)},countServiceUrl:"https://urls.api.twitter.com/1/urls/count.json?url="});var u=function(t,e,n){this.init(t,e,n),this.type="vkontakte"};u.prototype=new s,u.prototype=t.extend(u.prototype,{countLikes:function(){function n(n,i){if(i>0){var o=e.socialButtonCountObjects[n].id,r=t("#"+o);r.addClass("like-not-empty"),t("span.l-count",r).text(i),w(r)}}e.socialButtonCountObjects[this.index]=this;var i=this.getCountLink(this.linkToShare)+"&index="+this.index;if("undefined"==typeof e.VK&&(e.VK={}),"undefined"==typeof e.VK.Share&&(e.VK.Share={}),"undefined"==typeof e.VK.Share.count)e.VK.Share.count=function(t,e){n(t,e)};else{var o=e.VK.Share.count;e.VK.Share.count=function(t,i){n(t,i),o.call(e.VK.Share,t,i)}}return t.ajax({url:i,dataType:"jsonp"})},getShareLink:function(){return"http://vk.com/share.php?url="+encodeURIComponent(this.linkToShare)},countServiceUrl:"https://vk.com/share.php?act=count&url="});var h=function(t,e,n){this.init(t,e,n),this.type="odnoklassniki"};h.prototype=new s,h.prototype=t.extend(h.prototype,{countLikes:function(){function n(e,n){if(n>0){var i=t("#"+e);i.addClass("like-not-empty"),t("span.l-count",i).text(n),w(i)}}var i=this.getCountLink(this.id,this.linkToShare);if(e.ODKL){var o=ODKL.updateCount;ODKL.updateCount=function(t,e){n(t,e),o(t,e)}}else e.ODKL={updateCount:function(t,e){n(t,e)}};this.id;return t.ajax({url:i,dataType:"jsonp"})},getShareLink:function(){return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+this.linkToShare+"&st.comments="+encodeURIComponent(this.summary)},getCountLink:function(t,e){return this.countServiceUrl+t+"&ref="+encodeURIComponent(e)},countServiceUrl:"https://connect.ok.ru/dk?st.cmd=extLike&uid="});var p=function(t,e,n){this.init(t,e,n),this.type="gplusButton"};p.prototype=new s,p.prototype=t.extend(p.prototype,{countLikes:function(){serviceURI=this.linkToShare;var e=this.id;t.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:this.linkToShare,params:{nolog:!0,id:this.linkToShare,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(n){if(n.result.metadata.globalCounts.count>0){var i=t("#"+e);i.addClass("like-not-empty"),t("span.l-count",i).text(n.result.metadata.globalCounts.count),w(i)}}})},getShareLink:function(){return"https://plus.google.com/share?url="+encodeURIComponent(this.linkToShare)},countServiceUrl:"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ"});var d=function(t,e,n){this.init(t,e,n),this.type="mailButton"};d.prototype=new s,d.prototype=t.extend(d.prototype,{countLikes:function(){return jllikeproShareUrls.mail[this.linkToShare]=this.id,e.setMailRuCount=function(e){for(var n in e)if(e.hasOwnProperty(n)){if(!jllikeproShareUrls.mail.hasOwnProperty(n))return;var i=jllikeproShareUrls.mail[n],o=e[n].shares;if(o>0){var r=t("#"+i);r.addClass("like-not-empty"),t("span.l-count",r).text(o),w(r)}}},serviceURI=this.getCountLink(this.linkToShare),t.ajax({url:serviceURI,dataType:"jsonp"})},getShareLink:function(){return"http://connect.mail.ru/share?url="+encodeURIComponent(this.linkToShare)+"&imageurl"+encodeURIComponent(this.images[0])+"&title"+encodeURIComponent(this.title)+"&description"+encodeURIComponent(this.summary)},countServiceUrl:"https://connect.mail.ru/share_count?callback=1&func=setMailRuCount&url_list="});var f=function(t,e,n){this.init(t,e,n),this.type="linButton"};f.prototype=new s,f.prototype=t.extend(f.prototype,{countLikes:function(){jllikeproShareUrls.linkedin[this.linkToShare]=this.id,e.setLinkedInCount=function(e){if(jllikeproShareUrls.linkedin.hasOwnProperty(e.url)){var n=jllikeproShareUrls.linkedin[e.url],i=e.count;if(i>0){var o=t("#"+n);o.addClass("like-not-empty"),t("span.l-count",o).text(i),w(o)}}};var n=this.getCountLink(this.linkToShare);return t.ajax({url:n,dataType:"jsonp"})},getShareLink:function(){return"http://www.linkedin.com/shareArticle?mini=true&ro=false&trk=bookmarklet&url="+this.linkToShare},countServiceUrl:"https://www.linkedin.com/countserv/count/share?&callback=setLinkedInCount&format=jsonp&url="});var k=function(t,e,n){this.init(t,e,n),this.type="pinteresButton"};k.prototype=new s,k.prototype=t.extend(k.prototype,{countLikes:function(){return jllikeproShareUrls.pinteres[this.linkToShare]=this.id,e.setPinteresCount=function(e){if(e.hasOwnProperty("count")){if(!jllikeproShareUrls.pinteres.hasOwnProperty(e.url))return;var n=jllikeproShareUrls.pinteres[e.url];if(e.count>0){var i=t("#"+n);i.addClass("like-not-empty"),t("span.l-count",i).text(e.count),w(i)}}},serviceURI=this.getCountLink(this.linkToShare),t.ajax({url:serviceURI,dataType:"jsonp"})},getShareLink:function(){var t=this.images[0]!=i?this.images[0]:"";return"http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(this.linkToShare)+"&media="+t+"&description="+this.summary},countServiceUrl:"https://api.pinterest.com/v1/urls/count.json?callback=setPinteresCount&url="});var m=function(t,e,n){this.init(t,e,n),this.type="livejournal"};m.prototype=new s,m.prototype=t.extend(m.prototype,{countLikes:function(){},getShareLink:function(){return"http://livejournal.com/update.bml?subject="+encodeURIComponent(this.title)+"&event="+encodeURIComponent('<a href="'+this.linkToShare+'">'+this.title+"</a> "+this.summary)},countServiceUrl:"http://livejournal.com/"});var g=function(t,e,n){this.init(t,e,n),this.type="Blogger"};g.prototype=new s,g.prototype=t.extend(g.prototype,{countLikes:function(){},getShareLink:function(){return"https://www.blogger.com/blog-this.g?u="+encodeURIComponent(this.linkToShare)+"&n="+encodeURIComponent(this.title)},countServiceUrl:"https://www.blogger.com/"});var y=function(t,e,n){this.init(t,e,n),this.type="Weibo"};y.prototype=new s,y.prototype=t.extend(y.prototype,{countLikes:function(){},getShareLink:function(){return"http://service.weibo.com/share/share.php?url="+encodeURIComponent(this.linkToShare)+"&title="+encodeURIComponent(this.title)},countServiceUrl:"http://service.weibo.com/"});var v=function(t,e,n){this.init(t,e,n),this.type="Telegram"};v.prototype=new s,v.prototype=t.extend(v.prototype,{countLikes:function(){},getShareLink:function(){return"https://t.me/share/url?url="+encodeURIComponent(this.linkToShare)+"&text="+encodeURIComponent(this.title)},countServiceUrl:"https://t.me/"});var S=function(t,e,n){this.init(t,e,n),this.type="Whatsapp"};S.prototype=new s,S.prototype=t.extend(S.prototype,{countLikes:function(){},getShareLink:function(){return"https://api.whatsapp.com/send?url="+encodeURIComponent(this.linkToShare)+"&text="+encodeURIComponent(this.linkToShare)},countServiceUrl:"https://api.whatsapp.com"});var w=function(e){var n,i=t(e).parents(".jllikeproSharesContayner"),o=i.find("span.l-all-count"),r=0;i.find(".l-count").not(".l-all-count").each(function(){n=t(this).text(),""!=n&&(r+=parseInt(n))}),o.text(r)};t.fn.socialButton=function(e){return this.each(function(n,i){setTimeout(function(){var n=t(i),o=new r(e),a=!1;s.lastIndex++,n.is(o.selectors.facebookButton)?a=new l(n,o,s.lastIndex):n.is(o.selectors.twitterButton)?a=new c(n,o,s.lastIndex):n.is(o.selectors.vkontakteButton)?a=new u(n,o,s.lastIndex):n.is(o.selectors.odnoklassnikiButton)?a=new h(n,o,s.lastIndex):n.is(o.selectors.gplusButton)?a=new p(n,o,s.lastIndex):n.is(o.selectors.mailButton)?a=new d(n,o,s.lastIndex):n.is(o.selectors.linButton)?a=new f(n,o,s.lastIndex):n.is(o.selectors.pinteresButton)?a=new k(n,o,s.lastIndex):n.is(o.selectors.LivejournalButton)?a=new m(n,o,s.lastIndex):n.is(o.selectors.BloggerButton)?a=new g(n,o,s.lastIndex):n.is(o.selectors.WeiboButton)?a=new y(n,o,s.lastIndex):n.is(o.selectors.TelegramButton)?a=new v(n,o,s.lastIndex):n.is(o.selectors.WhatsappButton)&&(a=new S(n,o,s.lastIndex)),t.when(a.ajaxRequest).then(function(){n.trigger("socialButton.done",[a.type])},function(){n.trigger("socialButton.done",[a.type])})},0)}),this},t.scrollToButton=function(n,i){if(!e.location.hash&&e.location.search){var r=o(n);if(r){var s=t("#"+r);s.length>0&&t("html,body").animate({scrollTop:s.offset().top,scrollLeft:s.offset().left},i||1e3)}}return this}}(jQuery,window,document),jQuery(document).ready(function(t){t(".like").socialButton();var e=t("div.jllikeproSharesContayner"),n=jllickeproSettings.buttonsContayner;""!=n&&t(n).length>0&&e.length>0&&0==jllickeproSettings.isCategory&&(e.remove(),t(n).html(e))});