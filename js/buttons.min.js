var socialButtonCountObjects={},jllikeproShareUrls={mail:{},pinteres:{},linkedin:{}};jQuery.noConflict(),function(a,b,c,d){function e(a){if(a){var b=top.location.search.replace(/^\?/,"").split("&");for(var c in b){var d=b[c],e=d.match(/([^=]*)=(\w*)/);if(e[1]===a)return decodeURIComponent(e[2])}}return!1}var f=function(b){return b?a.extend(!0,f.defaults,b):f.defaults};f.defaults={selectors:{facebookButton:".l-fb",twitterButton:".l-tw",vkontakteButton:".l-vk",odnoklassnikiButton:".l-ok",gplusButton:".l-gp",mailButton:".l-ml",linButton:".l-ln",pinteresButton:".l-pinteres",LivejournalButton:".l-lj",BloggerButton:".l-bl",WeiboButton:".l-wb",count:".l-count",ico:".l-ico",shareTitle:"h2:eq(0)",shareSumary:"p:eq(0)",shareImages:"img[src]"},buttonDepth:2,alternativeImage:"",alternativeSummary:"",alternativeTitle:"",forceAlternativeImage:!1,forceAlternativeSummary:!1,forceAlternativeTitle:!1,classes:{countVisibleClass:"like-not-empty"},keys:{shareLinkParam:"href"},popupWindowOptions:["left=0","top=0","width=500","height=250","personalbar=0","toolbar=0","scrollbars=1","resizable=1"]};var g=function(){};g.lastIndex=0,g.prototype={init:function(b,c,d){this.config=c,this.index=d,this.id=a(b).attr("id"),this.$context=b,this.$count=a(this.config.selectors.count,this.$context),this.$ico=a(this.config.selectors.ico,this.$context),this.collectShareInfo(),this.bindEvents(),this.ajaxRequest=this.countLikes()},bindEvents:function(){this.$context.bind("click",g.returnFalse),this.$ico.parent().bind("click",this,this.openShareWindow)},setCountValue:function(a){this.$context.addClass(this.config.classes.countVisibleClass),this.$count.text(a)},getCountLink:function(a){return this.countServiceUrl+encodeURIComponent(a)},collectShareInfo:function(){var e=this.$context,f=this;e=jQuery(jllickeproSettings.parentContayner).length>0?e.parents(jllickeproSettings.parentContayner).parent():e.parents(".jllikeproSharesContayner").parent();var g,n,i=a("input.link-to-share",e).val(),j=a("input.share-title",e).val(),k=a("input.share-image",e).val(),m=(jllickeproSettings.url,a(this.config.selectors.shareTitle,e));if(m.length||(m=a(this.config.selectors.shareTitle,g)),n=a("input.share-desc",e).val(),n.length||(n=a(this.config.selectors.shareSumary,e).text()),n.length||(n=e.text()),n.length||(n=e.parent().text()),this.domenhref=b.location.protocol+"//"+b.location.host,this.linkhref=jllickeproSettings.url+b.location.pathname+b.location.search,this.linkToShare=i?i:this.linkhref,this.title=""!=j?j:m.text(),this.config.forceAlternativeTitle?this.title=this.config.alternativeTitle:""==this.title&&this.config.alternativeTitle?this.title=this.config.alternativeTitle:""==this.title&&(this.title=c.title),n.length>0?this.summary=n:this.summary=this.config.alternativeSummary?this.config.alternativeSummary:"",this.summary=this.summary.length>200?h(this.summary,200)+"...":this.summary,this.images=[],"undefined"!=typeof k&&k.length)this.images[0]=k;else{var o=a(this.config.selectors.shareImages,e);if(g=e,!o.length)for(var p=0;0==o.length&&p<20;)p++,g=g.parent(),o=a(this.config.selectors.shareImages,g).not("#waitimg");o.length>0&!this.config.forceAlternativeImage?(o.each(function(a,b){f.images[a]=b.src}),this.images=f.images):this.images[0]=this.config.alternativeImage?this.config.alternativeImage:d}},getPopupOptions:function(){return this.config.popupWindowOptions.join(",")},plusOne:function(){var b=a("#"+this.id),c=a("span.l-count",b),d=c.text();d=""==d?0:parseInt(d),b.addClass("like-not-empty"),c.text(d+1)},disableMoreLikes:function(){if(jllickeproSettings.disableMoreLikes){var b=a("#"+this.id).parents(".jllikeproSharesContayner"),c=b.children(".share-id").val(),d=new Date((new Date).getTime()+2592e6);document.cookie="jllikepro_article_"+c+"=1; path=/; expires="+d.toUTCString();var e=a("<div/>").addClass("disable_more_likes");b.prepend(e)}},openShareWindow:function(a){var c=a.data,d=c.getShareLink(),e=c.getPopupOptions(),f=b.open(d,"",e);c.plusOne(),c.disableMoreLikes(),b.focus&&f.focus()},linkToShare:null,title:c.title,summary:null,images:[],countServiceUrl:null,$context:null,$count:null,$ico:null},g=a.extend(g,{returnFalse:function(a){return!1}});var h=function(b,c){var d="";return b.split(" ").every(function(b){var e=a.trim(b);return d.length+e.length<=c&&(""!=e&&(d+=" "+e),!0)}),d},i=function(a,b,c){this.init(a,b,c),this.type="facebook"};i.prototype=new g,i.prototype=a.extend(i.prototype,{countLikes:function(){var b=this.getCountLink(this.linkToShare),c=this.id;return a.ajax({url:b,dataType:"jsonp",success:function(b,d,e){if("success"==d&&"undefined"!=typeof b.share&&"undefined"!=typeof b.share.share_count&&b.share.share_count>0){var f=a("#"+c);f.addClass("like-not-empty"),a("span.l-count",f).text(b.share.share_count),t(f)}}})},getShareLink:function(){var a="https://www.facebook.com/sharer/sharer.php?app_id=114545895322903&sdk=joey&u="+encodeURIComponent(this.linkToShare)+"&display=popup&ref=plugin&src=share_button";return a},countServiceUrl:"https://graph.facebook.com/"});var j=function(a,b,c){this.init(a,b,c),this.type="twitter"};j.prototype=new g,j.prototype=a.extend(j.prototype,{countLikes:function(){},getShareLink:function(){var a=h(this.summary,140-this.title.length-this.linkToShare.length);return"https://twitter.com/intent/tweet?url="+encodeURIComponent(this.linkToShare)+"&text="+encodeURIComponent(this.title+". "+a)},countServiceUrl:"https://urls.api.twitter.com/1/urls/count.json?url="});var k=function(a,b,c){this.init(a,b,c),this.type="vkontakte"};k.prototype=new g,k.prototype=a.extend(k.prototype,{countLikes:function(){function d(c,d){if(d>0){var e=b.socialButtonCountObjects[c].id,f=a("#"+e);f.addClass("like-not-empty"),a("span.l-count",f).text(d),t(f)}}b.socialButtonCountObjects[this.index]=this;var c=this.getCountLink(this.linkToShare)+"&index="+this.index;if("undefined"==typeof b.VK&&(b.VK={}),"undefined"==typeof b.VK.Share&&(b.VK.Share={}),"undefined"==typeof b.VK.Share.count)b.VK.Share.count=function(a,b){d(a,b)};else{var e=b.VK.Share.count;b.VK.Share.count=function(a,c){d(a,c),e.call(b.VK.Share,a,c)}}return a.ajax({url:c,dataType:"jsonp"})},getShareLink:function(){return"http://vk.com/share.php?url="+encodeURIComponent(this.linkToShare)},countServiceUrl:"https://vk.com/share.php?act=count&url="});var l=function(a,b,c){this.init(a,b,c),this.type="odnoklassniki"};l.prototype=new g,l.prototype=a.extend(l.prototype,{countLikes:function(){function c(b,c){if(c>0){var d=a("#"+b);d.addClass("like-not-empty"),a("span.l-count",d).text(c),t(d)}}var d=this.getCountLink(this.id,this.linkToShare);if(b.ODKL){var e=ODKL.updateCount;ODKL.updateCount=function(a,b){c(a,b),e(a,b)}}else b.ODKL={updateCount:function(a,b){c(a,b)}};this.id;return a.ajax({url:d,dataType:"jsonp"})},getShareLink:function(){return"http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+this.linkToShare+"&st.comments="+encodeURIComponent(this.summary)},getCountLink:function(a,b){return this.countServiceUrl+a+"&ref="+encodeURIComponent(b)},countServiceUrl:"https://connect.ok.ru/dk?st.cmd=extLike&uid="});var m=function(a,b,c){this.init(a,b,c),this.type="gplusButton"};m.prototype=new g,m.prototype=a.extend(m.prototype,{countLikes:function(){serviceURI=this.linkToShare;var b=this.id;a.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify({method:"pos.plusones.get",id:this.linkToShare,params:{nolog:!0,id:this.linkToShare,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(c){if(c.result.metadata.globalCounts.count>0){var d=a("#"+b);d.addClass("like-not-empty"),a("span.l-count",d).text(c.result.metadata.globalCounts.count),t(d)}}})},getShareLink:function(){return"https://plus.google.com/share?url="+encodeURIComponent(this.linkToShare)},countServiceUrl:"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ"});var n=function(a,b,c){this.init(a,b,c),this.type="mailButton"};n.prototype=new g,n.prototype=a.extend(n.prototype,{countLikes:function(){return jllikeproShareUrls.mail[this.linkToShare]=this.id,b.setMailRuCount=function(b){for(var c in b)if(b.hasOwnProperty(c)){if(!jllikeproShareUrls.mail.hasOwnProperty(c))return;var d=jllikeproShareUrls.mail[c],e=b[c].shares;if(e>0){var f=a("#"+d);f.addClass("like-not-empty"),a("span.l-count",f).text(e),t(f)}}},serviceURI=this.getCountLink(this.linkToShare),a.ajax({url:serviceURI,dataType:"jsonp"})},getShareLink:function(){return"http://connect.mail.ru/share?url="+encodeURIComponent(this.linkToShare)+"&imageurl"+encodeURIComponent(this.images[0])+"&title"+encodeURIComponent(this.title)+"&description"+encodeURIComponent(this.summary)},countServiceUrl:"https://connect.mail.ru/share_count?callback=1&func=setMailRuCount&url_list="});var o=function(a,b,c){this.init(a,b,c),this.type="linButton"};o.prototype=new g,o.prototype=a.extend(o.prototype,{countLikes:function(){jllikeproShareUrls.linkedin[this.linkToShare]=this.id,b.setLinkedInCount=function(b){if(jllikeproShareUrls.linkedin.hasOwnProperty(b.url)){var c=jllikeproShareUrls.linkedin[b.url],d=b.count;if(d>0){var e=a("#"+c);e.addClass("like-not-empty"),a("span.l-count",e).text(d),t(e)}}};var c=this.getCountLink(this.linkToShare);return a.ajax({url:c,dataType:"jsonp"})},getShareLink:function(){return"http://www.linkedin.com/shareArticle?mini=true&ro=false&trk=bookmarklet&url="+this.linkToShare},countServiceUrl:"https://www.linkedin.com/countserv/count/share?&callback=setLinkedInCount&format=jsonp&url="});var p=function(a,b,c){this.init(a,b,c),this.type="pinteresButton"};p.prototype=new g,p.prototype=a.extend(p.prototype,{countLikes:function(){return jllikeproShareUrls.pinteres[this.linkToShare]=this.id,b.setPinteresCount=function(b){if(b.hasOwnProperty("count")){if(!jllikeproShareUrls.pinteres.hasOwnProperty(b.url))return;var c=jllikeproShareUrls.pinteres[b.url];if(b.count>0){var d=a("#"+c);d.addClass("like-not-empty"),a("span.l-count",d).text(b.count),t(d)}}},serviceURI=this.getCountLink(this.linkToShare),a.ajax({url:serviceURI,dataType:"jsonp"})},getShareLink:function(){var a=this.images[0]!=d?this.images[0]:"";return"http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(this.linkToShare)+"&media="+a+"&description="+this.summary},countServiceUrl:"https://api.pinterest.com/v1/urls/count.json?callback=setPinteresCount&url="});var q=function(a,b,c){this.init(a,b,c),this.type="livejournal"};q.prototype=new g,q.prototype=a.extend(q.prototype,{countLikes:function(){},getShareLink:function(){return"http://livejournal.com/update.bml?subject="+encodeURIComponent(this.title)+"&event="+encodeURIComponent('<a href="'+this.linkToShare+'">'+this.title+"</a> "+this.summary)},countServiceUrl:"http://livejournal.com/"});var r=function(a,b,c){this.init(a,b,c),this.type="Blogger"};r.prototype=new g,r.prototype=a.extend(r.prototype,{countLikes:function(){},getShareLink:function(){return"https://www.blogger.com/blog-this.g?u="+encodeURIComponent(this.linkToShare)+"&n="+encodeURIComponent(this.title)},countServiceUrl:"https://www.blogger.com/"});var s=function(a,b,c){this.init(a,b,c),this.type="Weibo"};s.prototype=new g,s.prototype=a.extend(s.prototype,{countLikes:function(){},getShareLink:function(){return"http://service.weibo.com/share/share.php?url="+encodeURIComponent(this.linkToShare)+"&title="+encodeURIComponent(this.title)},countServiceUrl:"http://service.weibo.com/"});var t=function(b){var f,c=a(b).parents(".jllikeproSharesContayner"),d=c.find("span.l-all-count"),e=0;c.find(".l-count").not(".l-all-count").each(function(){f=a(this).text(),""!=f&&(e+=parseInt(f))}),d.text(e)};a.fn.socialButton=function(b){return this.each(function(c,d){setTimeout(function(){var c=a(d),e=new f(b),h=!1;g.lastIndex++,c.is(e.selectors.facebookButton)?h=new i(c,e,g.lastIndex):c.is(e.selectors.twitterButton)?h=new j(c,e,g.lastIndex):c.is(e.selectors.vkontakteButton)?h=new k(c,e,g.lastIndex):c.is(e.selectors.odnoklassnikiButton)?h=new l(c,e,g.lastIndex):c.is(e.selectors.gplusButton)?h=new m(c,e,g.lastIndex):c.is(e.selectors.mailButton)?h=new n(c,e,g.lastIndex):c.is(e.selectors.linButton)?h=new o(c,e,g.lastIndex):c.is(e.selectors.pinteresButton)?h=new p(c,e,g.lastIndex):c.is(e.selectors.LivejournalButton)?h=new q(c,e,g.lastIndex):c.is(e.selectors.BloggerButton)?h=new r(c,e,g.lastIndex):c.is(e.selectors.WeiboButton)&&(h=new s(c,e,g.lastIndex)),a.when(h.ajaxRequest).then(function(){c.trigger("socialButton.done",[h.type])},function(){c.trigger("socialButton.done",[h.type])})},0)}),this},a.scrollToButton=function(c,d){if(!b.location.hash&&b.location.search){var f=e(c);if(f){var g=a("#"+f);g.length>0&&a("html,body").animate({scrollTop:g.offset().top,scrollLeft:g.offset().left},d||1e3)}}return this}}(jQuery,window,document),jQuery(document).ready(function(a){a(".like").socialButton();var b=a("div.jllikeproSharesContayner"),c=jllickeproSettings.buttonsContayner;""!=c&&a(c).length>0&&b.length>0&&0==jllickeproSettings.isCategory&&(b.remove(),a(c).html(b))});